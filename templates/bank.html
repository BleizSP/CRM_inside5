{%  extends 'masterpage.html' %}

{% load static %}

{% block mainblock %}
    <div class="app-page-title">
                        <div class="page-title-wrapper">
                            <div class="page-title-heading">
                                <div class="page-title-icon">
                                    <i class="pe-7s-car icon-gradient bg-mean-fruit"></i>
                                </div>
                                <div>Informacje o: {{ bank }}
                                    <div class="page-title-subheading">Listę wszystkich operacji wykonanych na daną metode płatności.

                                    </div>
                                </div>
                            </div>
                            <div class="page-title-actions">
                            </div>
                        </div>
    </div>
<div class="app-main__inner">
{#--- Up stats ---#}
<div class="main-card mb-3 card">

                            <div class="card-shadow-primary card-border mb-3 card">
                                <div class="dropdown-menu-header">
                                    <div class="dropdown-menu-header-inner bg-dark">
                                        <div class="menu-header-content">
                                            <div class="avatar-icon-wrapper mb-3 avatar-icon-xl">
                                                <div class="avatar-icon"><img
                                                        src="../assets/images/avatars/6.jpg"
                                                        alt="Logo banku"></div>
                                            </div>
                                            <div>
                                                <h5 class="menu-header-title">{{ bank.name }}</h5>
                                                <h6 class="menu-header-subtitle"></h6>
                                            </div>
                                            <div class="menu-header-btn-pane pt-1">
                                                <button class="btn-icon btn btn-warning btn-sm">{{ bank.type}}</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                            <div class="card-header-title font-size-lg text-capitalize font-weight-normal">
                                <i class="header-icon lnr-laptop-phone mr-3 text-muted opacity-6"> </i>
                                Podsumowanie</div>
                             <div tabindex="-1" class="dropdown-divider"></div>
                                <div class="row">
                        <div class="col-md-6 col-lg-3">
                            <div class="widget-chart widget-chart2 text-left mb-3 card-btm-border card-shadow-primary border-primary card">
                                <div class="widget-chat-wrapper-outer">
                                    <div class="widget-chart-content">
                                        <div class="widget-title opacity-5 text-uppercase">Total deposits</div>
                                        <div class="widget-numbers mt-2 fsize-4 mb-0 w-100">
                                            <div class="widget-chart-flex align-items-center">
                                                <div>
                                                    <span class="opacity-10 text-success pr-2">
                                                        <i class="fa fa-angle-right"></i>
                                                    </span>
                                                    {{ bank.bank_amount_depo }} €

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="widget-chart widget-chart2 text-left mb-3 card-btm-border card-shadow-danger border-danger card">
                                <div class="widget-chat-wrapper-outer">
                                    <div class="widget-chart-content">
                                        <div class="widget-title opacity-5 text-uppercase">Total withdrawals</div>
                                        <div class="widget-numbers mt-2 fsize-4 mb-0 w-100">
                                            <div class="widget-chart-flex align-items-center">
                                                <div>
                                                    <span class="opacity-10 text-danger pr-2">
                                                        <i class="fa fa-angle-down"></i>
                                                    </span>
                                                    {{ bank.bank_amount_wd }}

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="widget-chart widget-chart2 text-left mb-3 card-btm-border card-shadow-warning border-warning card">
                                <div class="widget-chat-wrapper-outer">
                                    <div class="widget-chart-content">
                                        <div class="widget-title opacity-5 text-uppercase">Ammount operation</div>
                                        <div class="widget-numbers mt-2 fsize-4 mb-0 w-100">
                                            <div class="widget-chart-flex align-items-center">
                                                <div>
                                                    <span class="opacity-10 text-success pr-2">
                                                        <i class="fa fa-angle-double-up"></i>
                                                    </span>
                                                    {{ bank.bank_amount_operation_count }}
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="widget-chart widget-chart2 text-left mb-3 card-btm-border card-shadow-success border-success card">
                                <div class="widget-chat-wrapper-outer">
                                    <div class="widget-chart-content">
                                        <div class="widget-title opacity-5 text-uppercase">Balance</div>
                                        <div class="widget-numbers mt-2 fsize-4 mb-0 w-100">
                                            <div class="widget-chart-flex align-items-center">
                                                <div>
                                                    <small class="fa fa-angle-up text-success pr-1"></small>
                                                    {{ bank.bank_amount_bilans }}

                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                                </div>
{#--- Table ---#}
                        <div class="card-body">
                        <div class="card-header-title font-size-lg text-capitalize font-weight-normal">
                            <i class="header-icon lnr-laptop-phone mr-3 text-muted opacity-6">
                            </i>Operations in this payment method
                        </div>

{#--- Test table Django2 ---#}

{#--- End test table Django2 ---#}
                        <div tabindex="-1" class="dropdown-divider"></div>
{#                        <div id="reportrange" class="btn btn-success btn-lg">#}
{##}
{#                            <span></span> <b class="caret"></b>#}
{#                          </div>#}
                               <table  style="width: 100%;" id="bank-operation-list" class="table table-hover table-striped table-bordered dataTable dtr-inline">

                                <thead>
                                <tr>

                                    <th>Klient</th>
                                    <th>Data dodania</th>
                                    <th>Typ operacji</th>
                                    <th>Kwota</th>
                                    <th>Status</th>
                                    <th>Akcja</th>
                                </tr>
                                </thead>
                                <tbody>
                                {%  for c in operation %}
                                <tr>

                                    <td>

                                    <form method="POST">
                                            {%  csrf_token %}
                                            <input type="hidden" value="{{ c.id }}" name="client-id">
                                            <button type="submit" class="mb-2 mr-2 btn btn-shadow btn-success">
                                                {{ c.client.name }} {{ c.client.lastname }}
                                            </button>
                                        </form>
                                    </td>
                                    <td>{{ c.date }}</td>
                                    <td>{{ c.type }}</td>
                                    <td>€ {{ c.cash }}</td>
                                    <td>{{ c.status }}</td>
                                    <td>

                                        <form method="POST">
                                            {%  csrf_token %}
                                            <input type="hidden" value="{{ c.bank.id }}" name="bank-id">
                                            <button type="submit" class="mb-2 mr-2 btn btn-shadow btn-success">Check
                                            </button>
                                        </form>

                                    </td>
                                    {% endfor %}
                                </tr>

                                </tbody>
                                <tfoot>

                                </tfoot>
                            </table>
                        </div>
                    </div>
    </div>
</div>
{% endblock %}